<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Score Calculator</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <div class="" id="container">
    <div class="heading">
      <h1>Chandigarh University</h1>
      <h3>Score Calculator</h3>
    </div>

    <div class="dropdown-select-type">
      <button class="dropbtn">Total Score
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="cgpa.html">CGPA</a>
        <a href="score.html">Total Score</a>
      </div>
    </div>

    <div class="dropdown-select-type">
      <button class="dropbtn">Theory
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="hybrid.html">Hybrid</a>
        <a href="theory.html">Theory</a>
        <a href="practical.html">Practical</a>
      </div>
    </div>

    <div class="content-container-hybrid">
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">MST I & II: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks MST I + II(40):-">
        <input type="number" class="js-input-field-mst grade" onkeydown="checkEnter(event, 'mst')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-mst save-btn" title="Save" onclick="calculateSum('mst');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Assignment: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 10:-">
        <input type="number" class="js-input-field-asg grade" onkeydown="checkEnter(event, 'asg')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-asg save-btn" title="Save" onclick="calculateSum('asg');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Surprise Test: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 12:-">
        <input type="number" class="js-input-field-st grade" onkeydown="checkEnter(event, 'st')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-st save-btn" title="Save" onclick="calculateSum('st');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Quiz: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 4:-">
        <input type="number" class="js-input-field-q grade" onkeydown="checkEnter(event, 'q')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-q save-btn" title="Save" onclick="calculateSum('q');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Attendance: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 2:-">
        <input type="number" class="js-input-field-att grade" onkeydown="checkEnter(event, 'att')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-att save-btn" title="Save" onclick="calculateSum('att');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>

      <div>
        <button class="total-marks-btn" onclick="window.location.reload()">
          Refresh
        </button>
        <button class="total-marks-btn" onclick="totalMarks();">
          Calculate Marks
        </button>
      </div>
    </div>
    <script>
      document.querySelectorAll(".js-disabled-input").forEach(input => {
        input.disabled = true;
      });

      const maxMarks = {
        'att': 1,
        'q': 1,
        'st': 3,
        'asg': 1,
        'mst': 2
      }

      let results = [];

      function calculateSum(type) {
        document.querySelector(`.js-input-field-${type}`).disabled = true;
        console.log(typeof type);
        const saveButtons = document.querySelector(`.js-save-btn-${type}`);

        saveButtons.classList.add("clicked-save-btn");

        const element = document.querySelector(`.js-input-field-${type}`);
        const inputFields =element.value;
        console.log(inputFields);

        let sum = inputFields / maxMarks[type];
        results.push(Number(sum.toFixed(2)));
        console.log(results);
      }

      function totalMarks() {
        let total = 0;
        // Using forEach loop to add each element to the total
        results.forEach(result => {
          total += result;
        });
        
        alert(`Your Total Marks out of 40 = ${total}`);
      }

      function checkEnter(event, type){
        if(event.key === "Enter"){
          calculateSum(type)
        }
      }

    </script>
</body>

</html>