<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Score Calculator</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <div class="" id="container">
    <div class="heading">
      <h1>Chandigarh University</h1>
      <h3>Score Calculator</h3>
    </div>

    <div class="dropdown-select-type">
      <button class="dropbtn">Total Score
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="cgpa.html">CGPA</a>
        <a href="score.html">Total Score</a>
      </div>
    </div>

    <div class="dropdown-select-type">
      <button class="dropbtn">Practical
        <i class="fa fa-caret-down"></i>
      </button>
      <div class="dropdown-content">
        <a href="hybrid.html">Hybrid</a>
        <a href="theory.html">Theory</a>
        <a href="practical.html">Practical</a>
      </div>
    </div>

    <div class="content-container-hybrid">
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Worksheet: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 300:-">
        <input type="number" class="js-input-field-w grade" onkeydown="checkEnter(event, 'w')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-w save-btn" title="Save" onclick="calculateSum('w');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Lab MST: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 15:-">
        <input type="number" class="js-input-field-lm grade" onkeydown="checkEnter(event, 'lm')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-lm save-btn" title="Save" onclick="calculateSum('lm');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>
      <p class="note">
        * If your attendace is above 90% then enter 4 else 0.
      </p>
      <div class="details-per-subject-hybrid">
        <label for="fname" class="subject">Attendance: </label>
        <input type="text" class="js-disabled-input credit" name="fname" placeholder="Enter marks out of 4:-">
        <input type="number" class="js-input-field-att grade" onkeydown="checkEnter(event, 'att')" name="fname" placeholder="Marks Received">
        <button class="js-save-btn-att save-btn" title="Save" onclick="calculateSum('att');">
          <i class="fa fa-check" aria-hidden="true"></i>
        </button><br>
      </div>

      <div>
        <button class="total-marks-btn" onclick="window.location.reload()">
          Refresh
        </button>
        <button class="total-marks-btn" onclick="totalMarks();">
          Calculate Marks
        </button>
      </div>
    </div>
    <script>
      document.querySelectorAll(".js-disabled-input").forEach(input => {
        input.disabled = true;
      });

      const maxMarks = {
        'w': 7.5,
        'lm': 1.25,
        'att': 1,
      }

      let results = [];

      function calculateSum(type) {
        document.querySelector(`.js-input-field-${type}`).disabled = true;
        console.log(typeof type);
        const saveButtons = document.querySelector(`.js-save-btn-${type}`);

        saveButtons.classList.add("clicked-save-btn");

        const element = document.querySelector(`.js-input-field-${type}`);
        const inputFields =element.value;
        console.log(inputFields);

        let sum = inputFields / maxMarks[type];
        results.push(Number(sum.toFixed(2)));
        console.log(results);
      }

      function totalMarks() {
        let total = 0;
        // Using forEach loop to add each element to the total
        results.forEach(result => {
          total += result;
        });

        total+=4.0;
        
        alert(`Your Total Marks out of 60 = ${total}'\n' *Taking the marks obtain in discussion form as 4`);
      }

      function checkEnter(event, type){
        if(event.key === "Enter"){
          calculateSum(type)
        }
      }

      // function refresh(){
      //   location.relod();
      // }

    </script>
</body>

</html>